{{ define "content" }}
<div class="flex min-h-screen bg-gray-900 text-gray-100">

  <!-- Sidebar -->
  {{ template "sidebar" . }}

  <!-- Main content -->
  <main class="flex-1 p-6 space-y-8">
    <!-- Facturas y Pagos -->
    <div class="grid 2xl:grid-cols-2 gap-6">

      <!-- Facturas -->
      {{ template "invoices_summary" . }}

      <!-- Pagos -->
      {{ template "payments" . }}

    </div>
    <!-- Acceso R√°pido -->
    <div class="bg-gray-800 p-6 rounded-lg quick-access">
      <h3 class="text-lg font-semibold mb-4">Acceso R√°pido</h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <button
          class="flex items-center justify-center space-x-2 bg-gray-700 p-4 rounded-lg text-sm hover:bg-gray-600 transition-colors"
          hx-on:click="let m=htmx.find('#invoice-modal'); m.classList.remove('hidden'); m.classList.add('flex')">
          <span>üìù</span><span>+ Nueva Factura</span>
        </button>
        <button
          class="flex items-center justify-center space-x-2 bg-gray-700 p-4 rounded-lg text-sm hover:bg-gray-600 transition-colors"
          hx-on:click="let m=htmx.find('#payment-modal'); m.classList.remove('hidden'); m.classList.add('flex')">
          <span>üìÑ</span><span>+ Nuevo Pago</span>
        </button>
        <button
          class="flex items-center justify-center space-x-2 bg-gray-700 p-4 rounded-lg text-sm hover:bg-gray-600 transition-colors"
          hx-on:click="htmx.find('#import-file').click()">
          <span>üõ©Ô∏è</span><span>Importar Datos</span>
        </button>
        <button
          class="flex items-center justify-center space-x-2 bg-gray-700 p-4 rounded-lg text-sm hover:bg-gray-600 transition-colors"
          hx-on:click="let m=htmx.find('#export-modal'); m.classList.remove('hidden'); m.classList.add('flex')">
          <span>‚úàÔ∏è</span><span>Exportar Datos</span>
        </button>
      </div>
    </div>

    <form id="import-form" hx-post="/api/v1/admin/import" hx-encoding="multipart/form-data" hx-on="htmx:afterRequest: window.location.reload()" class="hidden">
      <input type="file" id="import-file" name="file" accept=".xlsx" onchange="this.form.requestSubmit()">
    </form>

    <div id="export-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 items-center justify-center hidden">
      <div class="bg-gray-800 rounded-lg p-8 max-w-sm w-full">
        <h2 class="text-xl font-bold text-white mb-4">Exportar Datos</h2>
        <form action="/api/v1/admin/export" method="GET" class="space-y-4">
          <div>
            <label for="export-year" class="block text-sm text-white mb-1">A√±o</label>
            <input type="number" id="export-year" name="year" value="{{ .CurrentYear }}" class="w-full bg-gray-700 text-white p-2 rounded" min="2000" max="2100" required>
          </div>
          <div class="flex justify-end space-x-2">
            <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-500 transition-colors">Exportar</button>
            <button type="button" id="close-export-modal"
              hx-on:click="let m=htmx.find('#export-modal'); m.classList.add('hidden'); m.classList.remove('flex')"
              class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-500 transition-colors">Cancelar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Estad√≠sticas -->
    <div class="bg-gray-800 p-6 rounded-lg space-y-6">
      <h3 class="text-lg font-semibold">Estad√≠sticas</h3>
      <div class="grid md:grid-cols-2 gap-6">
        <!-- Facturaci√≥n Anual -->
        <div>
          <h4 class="text-sm uppercase mb-2">Facturaci√≥n Anual</h4>
          <div class="bg-gray-700 p-4 rounded-lg">
            <div class="flex items-end h-40 space-x-2">
              <div class="w-1/6 h-8 bg-gray-600 rounded-t"></div>
              <div class="w-1/6 h-4 bg-gray-600 rounded-t"></div>
              <div class="w-1/6 h-28 bg-gray-600 rounded-t"></div>
              <div class="w-1/6 h-20 bg-gray-600 rounded-t"></div>
              <div class="w-1/6 h-16 bg-gray-600 rounded-t"></div>
              <div class="w-1/6 h-12 bg-gray-600 rounded-t"></div>
            </div>
            <div class="flex justify-between text-xs mt-2">
              <span>2020</span><span>2021</span><span>2022</span><span>2023</span><span>2024</span><span>2025</span>
            </div>
          </div>
        </div>

        <!-- Facturaci√≥n Mensual -->
        <div>
          <div class="flex">
            <h4 class="text-sm uppercase mb-2">Facturaci√≥n Mensual</h4>
          </div>
          <div class="bg-gray-700 p-4 rounded-lg">
            <div class="flex items-end h-40 space-x-2">
              <div class="w-1/6 h-8 bg-gray-600 rounded-t"></div>
              <div class="w-1/6 h-4 bg-gray-600 rounded-t"></div>
              <div class="w-1/6 h-28 bg-gray-600 rounded-t"></div>
              <div class="w-1/6 h-20 bg-gray-600 rounded-t"></div>
              <div class="w-1/6 h-16 bg-gray-600 rounded-t"></div>
              <div class="w-1/6 h-12 bg-gray-600 rounded-t"></div>
            </div>
            <div class="flex justify-between text-xs mt-2">
              <span>Enero 2025</span><span>Febrero 2025</span><span>Marzo 2025</span><span>Abril 2025</span><span>Mayo
                2025</span><span>Junio 2025</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

{{ end }}

{{ template "layout" . }}
